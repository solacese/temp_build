(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{76:function(e,t,a){e.exports=a(85)},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=a(131),i=a(130),s=a(48),u=a(12),m=a(129),d=a(54),E=a(133),g=a(132),h=a(122),p=a(134),b=a(116),f=Object(b.a)((function(e){return{button:{"& > *":{margin:e.spacing(1)}}}}));function v(e){var t=f(),a=Object(n.useState)(e.host),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(e.port),s=Object(u.a)(i,2),m=s[0],d=s[1],b=Object(n.useState)(e.userName),v=Object(u.a)(b,2),C=v[0],S=v[1],N=Object(n.useState)(e.password),O=Object(u.a)(N,2),j=O[0],L=O[1];return r.a.createElement(E.a,null,r.a.createElement(p.a,{variant:"filled",severity:e.status.isConnect?"success":"warning"},e.status.text),r.a.createElement("br",null),r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(g.a,{required:!0,id:"host",label:"Host",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement(g.a,{required:!0,id:"port",label:"Port",value:m,onChange:function(e){return d(e.target.value)}}),r.a.createElement(g.a,{required:!0,id:"userName",label:"UserName",value:C,onChange:function(e){return S(e.target.value)}}),r.a.createElement(g.a,{required:!0,id:"password",label:"Password",type:"password",value:j,onChange:function(e){return L(e.target.value)}})),r.a.createElement("div",{className:t.button},r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){return e.connect(l,m,C,j)},disabled:e.status.isConnect},"Connect"),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:e.disConnect,disabled:!e.status.isConnect},"Disconnect"))))}var C=a(135),S=a(136),N=a(137),O=a(121),j=Object(b.a)((function(e){return{button:{"& > *":{margin:e.spacing(1)}}}}));function L(e){var t=j(),a=Object(n.useState)(e.testCase),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(e.topicsMap.get(e.testCase)),s=Object(u.a)(i,2),m=s[0],d=s[1],p=!0,b=!0;return e.status.isConnect&&(p=e.isStart,b=!e.isStart),r.a.createElement(E.a,{my:1},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(O.a,{component:"legend"},"Test Cases"),r.a.createElement(S.a,{row:!0,"aria-label":"position",name:"position",value:l,onChange:function(t){return a=t.target.value,o(a),void d(e.topicsMap.get(a));var a}},r.a.createElement(N.a,{value:"FULL",control:r.a.createElement(C.a,{color:"primary"}),label:"FULL",disabled:p}),r.a.createElement(N.a,{value:"DELTA",control:r.a.createElement(C.a,{color:"primary"}),label:"DELTA",disabled:p}),r.a.createElement(N.a,{value:"SEQUENCE",control:r.a.createElement(C.a,{color:"primary"}),label:"SEQUENCE",disabled:p})),r.a.createElement("div",null,r.a.createElement(g.a,{id:"topics",label:"Topics",style:{margin:8},placeholder:"Placeholder",fullWidth:!0,margin:"normal",value:m,disabled:!0,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:t.button},r.a.createElement(h.a,{variant:"contained",color:"primary",disabled:p,onClick:function(){return e.start(l)}},"Start"),r.a.createElement(h.a,{variant:"contained",color:"primary",disabled:b,onClick:e.stop},"Stop"))))}var y=a(124),w=a(128),D=a(127),q=a(123),A=a(125),U=a(126),x=a(119),T=Object(b.a)({table:{minWidth:650}});function H(e){var t=T();return r.a.createElement("div",null,r.a.createElement(q.a,{component:x.a},r.a.createElement(y.a,{className:t.table,size:"small","aria-label":"a dense table"},r.a.createElement(A.a,null,r.a.createElement(U.a,null,r.a.createElement(D.a,null,"Num"),r.a.createElement(D.a,{align:"right"},"Date"),r.a.createElement(D.a,{align:"right"},"League"),r.a.createElement(D.a,{align:"right"},"Home"),r.a.createElement(D.a,{align:"right"},"Away"),r.a.createElement(D.a,{align:"right"},"Status"),r.a.createElement(D.a,{align:"right"},"Last Update"),r.a.createElement(D.a,{align:"right"},"Odds"))),r.a.createElement(w.a,null,e.matchList.map((function(e){return r.a.createElement(U.a,{key:e.matchNum},r.a.createElement(D.a,{component:"th",scope:"row"},e.matchNum),r.a.createElement(D.a,{align:"right"},e.matchDate.substring(0,10)),r.a.createElement(D.a,{align:"right"},e.league.leagueShortName),r.a.createElement(D.a,{align:"right"},e.homeTeam.teamNameCH),r.a.createElement(D.a,{align:"right"},e.awayTeam.teamNameCH),r.a.createElement(D.a,{align:"right"},e.matchStatus),r.a.createElement(D.a,{align:"right"},e.statuslastupdated.substring(0,19)),r.a.createElement(D.a,{align:"right"},"H:"+(t=e.hadodds).H+"\nA:"+t.A+"\nD:"+t.D));var t}))))))}var k,I=Object(b.a)({table:{minWidth:650}});function F(e){var t=I();return r.a.createElement("div",null,r.a.createElement(q.a,{component:x.a},r.a.createElement(y.a,{className:t.table,size:"small","aria-label":"a dense table"},r.a.createElement(A.a,null,r.a.createElement(U.a,null,r.a.createElement(D.a,null,"Sequence"),r.a.createElement(D.a,null,"Num"),r.a.createElement(D.a,{align:"right"},"Status"),r.a.createElement(D.a,{align:"right"},"Last Update"),r.a.createElement(D.a,{align:"right"},"Odds"))),r.a.createElement(w.a,null,e.deltaList.map((function(e){return r.a.createElement(U.a,{key:e.sequenceInt},r.a.createElement(D.a,{component:"th",scope:"row"},e.sequenceInt),r.a.createElement(D.a,{align:"right"},e.matchNum),r.a.createElement(D.a,{align:"right"},e.matchStatus),r.a.createElement(D.a,{align:"right"},e.statuslastupdated.substring(0,19)),r.a.createElement(D.a,{align:"right"},"H:"+(t=e.hadodds).H+", A:"+t.A+", D:"+t.D));var t}))))))}var M="FULL",J="",Q=new TextDecoder,W=new Map([["FULL","t1/match/+/full"],["DELTA","t1/match/+/delta"],["SEQUENCE","t1/match/1/delta"]]),P=[],z=[],R=0;function V(){var e=Object(n.useState)({isConnect:!1,text:"No Connection"}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),i=o[0],E=o[1],g=Object(n.useState)([]),h=Object(u.a)(g,2),p=h[0],b=h[1],f=Object(n.useState)([]),C=Object(u.a)(f,2),S=C[0],N=C[1];function O(e){c({isConnect:!1,text:"Connection Failure: "+e.errorMessage})}function j(e){c({isConnect:!1,text:"Connection Lost: "+e.errorMessage}),E(!1)}function y(e,t){k.subscribe("$SYS/client/reply-to"),c({isConnect:!0,text:"Connected to "+t}),E(!1),z=[],b(P=[]),N(z)}function w(e){if("$SYS/client/reply-to"===e.destinationName)return J=e.payloadString,void k.subscribe(J);var t=JSON.parse(Q.decode(e.payloadBytes));t.isDelta?"DELTA"===M?function(e){var t=P.findIndex((function(t){return t.matchNum===e.matchNum}));if(t>=0){var a=P[t];a.matchNum=e.matchNum,a.matchStatus=e.matchStatus,a.statuslastupdated=e.statuslastupdated,a.hadodds.H=e.hadodds.H,a.hadodds.A=e.hadodds.A,a.hadodds.D=e.hadodds.D,b(Object(s.a)(P))}else{D("t1/match/"+e.matchNum+"/full")}}(t):function(e){if(z.findIndex((function(t){return t.sequenceInt===e.sequenceInt}))>=0)return;z.push(e),z.length>20&&z.shift();if(!e.isReSend){var t=e.sequenceInt;t-R!==1&&(console.log("Msg Lost! Last Seq=".concat(R," Current Seq=").concat(t)),D(W.get(M),!0)),R=t}N(Object(s.a)(z))}(t):function(e){var t=P.findIndex((function(t){return t.matchNum===e.matchNum}));t>=0&&P.splice(t,1);P.push(e),b(Object(s.a)(P))}(t)}function D(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={protocol:"mqtt",topic:e,replyTo:J,isReSend:t};k.publish("cacheproxy/request",JSON.stringify(a))}return r.a.createElement(m.a,{maxWidth:"md"},r.a.createElement(v,{host:"localhost",port:9001,userName:"web",password:"password",status:a,connect:function(e,t,a,n){console.log("connect() is called"),"string"==typeof t&&(t=parseInt(t)),(k=new d.Client(e,t,"")).onConnectionLost=j,k.onMessageArrived=w,k.onConnected=y;var r={timeout:3,onFailure:O,userName:a,password:n};k.connect(r)},disConnect:function(){console.log("disConnect() is called"),a.isConnect&&k.disconnect()}}),r.a.createElement(L,{testCase:M,topicsMap:W,isStart:i,status:a,start:function(e){M=e,console.log("start: "+M),"FULL"!==M&&"DELTA"!==M||D(W.get("FULL")),k.subscribe(W.get(M)),E(!0)},stop:function(){k.unsubscribe(W.get(M)),E(!1),P=[]}}),"SEQUENCE"===M?r.a.createElement(F,{deltaList:S}):r.a.createElement(H,{matchList:p}))}var Y=a(47),$=a(55),B=Object($.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Y.a.A400},background:{default:"#fff"}}});l.a.render(r.a.createElement(i.a,{theme:B},r.a.createElement(o.a,null),r.a.createElement(V,null)),document.querySelector("#root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.ca5fd370.chunk.js.map